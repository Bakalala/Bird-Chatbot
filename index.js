var imagetest = "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"

const AssistantV2 = require('ibm-watson/assistant/v2');
const PAGE_ACCESS_TOKEN = 'EAAGM47EckQcBAPFRZAXZBap5vqEcxIV3jP4GCWzaZBFq6P28ZAgZBv81kdY5ZAxRNXb2KcS7wtxNOo7VtYw3TueGS24ruHCz3IZCJhTnZCJs3wPyAXwvVNLxdgsV6ZCF6UAnlmNOa8D34jJEi4fG79eEbKWqoRM2JsXZC6VoDM4TglTGgKQs0lkY1Q'
var express = require('express')
var request = require('request')
var base64 = require('node-base64-image')
var https = require('https')
var bodyParser = require("body-parser")
var tmp = require('tmp-promise');
var fs = require('fs')
var senderArr = [];
var sessArr = [];



var app = express();
app.use(bodyParser.json());

const service = new AssistantV2({
  iam_apikey: 'uMV9hKkWre8HeZhZmgDPxr6OAAu8D145_2wo1JTlDpr4',
  version: '2019-02-28',
  url: 'https://gateway-fra.watsonplatform.net/assistant/api'
});

// var session_id
var assistant_id = 'c2b52a1e-1a3c-403f-8b01-6df1c978605d'
var action
var bird
var status


app.post('/webhook', (req, res) => {

  // Parse the request body from the POST
  //console.log(req.body);
  let body = req.body;

  // Check the webhook event is from a Page subscription
  if (body.object === 'page') {

    body.entry.forEach(function(entry) {

      // Gets the body of the webhook event
      let webhook_event = entry.messaging[0];
      //console.log(webhook_event);


      // Get the sender PSID
      let sender_psid = webhook_event.sender.id;
      //console.log('Sender ID: ' + sender_psid);

      // Check if the event is a message or postback and
      // pass the event to the appropriate handler function

      handleMessage(sender_psid, webhook_event.message);

    });
    // Return a '200 OK' response to all events
    res.status(200).send('EVENT_RECEIVED');

  } else {
    // Return a '404 Not Found' if event is not from a page subscription
    res.sendStatus(404);
  }

});

// Accepts GET requests at the /webhook endpoint
app.get('/webhook', (req, res) => {

  /** UPDATE YOUR VERIFY TOKEN **/
  const VERIFY_TOKEN = "abcd";

  // Parse params from the webhook verification request
  let mode = req.query['hub.mode'];
  let token = req.query['hub.verify_token'];
  let challenge = req.query['hub.challenge'];

  // Check if a token and mode were sent
  if (mode && token) {

    // Check the mode and token sent are correct
    if (mode === 'subscribe' && token === VERIFY_TOKEN) {

      // Respond with 200 OK and challenge token from the request
      console.log('WEBHOOK_VERIFIED');
      res.status(200).send(challenge);

    } else {
      // Responds with '403 Forbidden' if verify tokens do not match
      res.sendStatus(403);
    }
  }
});

function creatSess(index) {
  return new Promise(function(resolve) {
    service.createSession({
        assistant_id: assistant_id
      })
      .then(res => {
        //console.log("I want to replace " + index)
        sessArr[index] = res.session_id // ba7ot el session id el gedeed fel index beta3 el adeem elly el session beta3to ended
        //console.log(res);
        resolve();
      })
      .catch(err => {
        console.log(err);
      });
  })
}

function sendMs(word, session_id) {
  return new Promise(function(resolve, reject) {
    service.message({
        assistant_id: assistant_id,
        session_id: session_id,
        context: {
          'global': {
            'system': {
              'user_id': 'my_user_id'
            }
          },
          "skills": {
            "main skill": {
              "user_defined": {
                "action": action,
                "bird": bird,
                "status": status
              }
            }
          }
        },
        input: {
          'message_type': 'text',
          'text': word,
          'options': {
            'return_context': true
          }
        }
      })
      .then(response => {
        //console.log(response.output.generic[0].text);
        //console.log(response.context.skills);
        try {
          resolve(response.output.generic[0].text)
          //Returns a text response from watson
        } catch (err) {
          resolve(null)
          //Returns null if watson does not retrun text
        }
      })
      .catch(err => {
        reject(err);
      });
  })
}

function handleMessage(sender_psid, received_message) {

  console.log(sender_psid);
  var i = 0
  var flag = false;

  if (senderArr.length == 0) {
    senderArr.push(sender_psid);
    creatSess(0)
      .then(function() {
        sendMs(received_message.text, sessArr[0])
          .then(answer => {
            callSendAPI(sender_psid, {
              'text': answer
            });
          })
      })

  } else {
    for (i = 0; i < senderArr.length; i++) { //badawar law sender id mawgood fel array
      if (sender_psid == senderArr[i]) { // sender found
        flag = true;
        let index = i

        // Checks if the message contains text
        if (received_message.text) {

          // Create the payload for a basic text message, which
          // will be added to the body of our request to the Send API
          sendMs(received_message.text, sessArr[index]).then(answer => {
              if (answer == null) {
                // If no text is returned, action from context is required
                callSendAPI(sender_psid, {
                  'text': "No response from watson"
                })
                return
              } else {
                callSendAPI(sender_psid, {
                  'text': answer
                });
                return
              }
            })
            .catch(err => {
              creatSess(index)
                .then(function() {
                  sendMs(received_message.text, sessArr[index])
                    .then(answer => {
                      if (answer == null) {
                        // If no text is returned, action from context is required
                        callSendAPI(sender_psid, {
                          'text': "No response from watson"
                        })
                        return
                      } else {
                        callSendAPI(sender_psid, {
                          'text': answer
                        })
                        return
                      }
                    })
                })
            })

        } else if (received_message.attachments) {

          var imageUrl = received_message.attachments[0].payload.url
          encode(imageUrl)
            .then(jsonImage => {
              uploadToNetwork(jsonImage)
                .then(function() {
                  handleMessage(sender_psid, {
                    'text': "ok"
                  })
                })
            })

          // if statement if they return an image upoad it to messeger

          var location



          tmp.file({
            postfix: '.png'
          }).then(o => {
            console.log("File: ", o.path);
            console.log("Filedescriptor: ", o.fd);
            location = o.path



            fs.promises.writeFile(location, imagetest, function(err) {
              if (err) {
                return console.log(err);
              }
              console.log("The file was saved!");
            }).then(function() {
              console.log("location is : " + location);
              callSendAPI(sender_psid, {
                "attachment": {
                  "type": "image",
                  "payload": {
                    "url": '/5a1cf931114511.0223199615118482410707.png',
                    "is_reusable": true
                  }
                }
              })

              callSendAPI(sender_psid, {
                "attachment": {
                  "type": "image",
                  "payload": {
                    "url": '/5a1cf931114511.0223199615118482410707.png',
                    "is_reusable": true
                  }
                }
              }, {
                filedata: fs.createReadStream('/5a1cf931114511.0223199615118482410707.png')
              })

              sendAttachment(sender_psid, '5a1cf931114511.0223199615118482410707.png')

              console.log("done");
            })



            // If we don't need the file anymore we could manually call cleanup
            // But that is not necessary if we didn't pass the keep option because the library
            // will clean after itself.
            //o.cleanup();
          });


          // tmp.file({
          //   postfix: '.png'
          // }, function _tempFileCreated(err, path, fd, cleanupCallback) {
          //   if (err) throw err;
          //
          //   location = path
          //   console.log('File: ', path);
          //   console.log('Filedescriptor: ', fd);
          //
          //   fs.writeFile(path, imagetest, function(err) {
          //     if (err) {
          //       return console.log(err);
          //     }
          //
          //     console.log("The file was saved!");
          //   });

          // If we don't need the file anymore we could manually call the cleanupCallback
          // But that is not necessary if we didn't pass the keep option because the library
          // will clean after itself.
          //cleanupCallback();
          // })
        }
      }

    }
    if (!flag) {

      senderArr.push(sender_psid);
      creatSess(sessArr.length) // 3ashan ana 3ayza a5er index.....
        .then(hi => {
          sendMs(received_message.text, sessArr[i])
            .then(answer => {
              if (answer == null) {
                // If no text is returned, action from context is required
                callSendAPI(sender_psid, {
                  'text': "No response from watson"
                })
                return
              } else {
                callSendAPI(sender_psid, {
                  'text': answer
                })
                return
              }
            })
        })
    }
  }


}

function callSendAPI(sender_psid, response) {

  // Construct the message body
  let request_body = {
    "recipient": {
      "id": sender_psid
    },
    "message": response
  }

  // Send the HTTP request to the Messenger Platform
  request({
    "uri": 'https://graph.facebook.com/v4.0/me/messages?access_token=EAAGM47EckQcBAPFRZAXZBap5vqEcxIV3jP4GCWzaZBFq6P28ZAgZBv81kdY5ZAxRNXb2KcS7wtxNOo7VtYw3TueGS24ruHCz3IZCJhTnZCJs3wPyAXwvVNLxdgsV6ZCF6UAnlmNOa8D34jJEi4fG79eEbKWqoRM2JsXZC6VoDM4TglTGgKQs0lkY1Q',
    "method": "POST",
    "json": request_body
  }, (err, res, body) => {
    if (!err) {
      console.log(response)
    } else {
      console.error("Unable to send message:" + err);
    }
  });
}

function encode(imageUrl) {
  var options = {
    string: true
  }
  return new Promise(function(resolve, reject) {
    base64.encode(imageUrl, options, function(err, image) {
      if (err) {
        reject(err)
      } else {
        resolve(image)
      }
    })
  })
}


function uploadToNetwork(jsonImage) {
  return new Promise(function(resolve, reject) {

    request.post({
      url: "https://flask-reliable-ardvark.cfapps.io/predict",
      json: {
        image: jsonImage
      },
    }, function(error, response, body) {
      if (!error) {
        console.log(body);
        var parsedjson = JSON.parse(body)
        bird = parsedjson.Result
        status = 'true'
        resolve()
      } else {
        status = 'false'
        console.log(error);
        reject()
      }
    })
  })
}


app.listen(process.env.PORT || 1337, () => console.log('webhook is listening'));


// check this website  https://stackoverflow.com/questions/45751140/how-to-use-facebook-messenger-send-image-api-in-node-js

function callSendAPItest(messageData, formData) {
  request({
    url: 'https://graph.facebook.com/v4.0/me/messages?access_token=EAAGM47EckQcBAPFRZAXZBap5vqEcxIV3jP4GCWzaZBFq6P28ZAgZBv81kdY5ZAxRNXb2KcS7wtxNOo7VtYw3TueGS24ruHCz3IZCJhTnZCJs3wPyAXwvVNLxdgsV6ZCF6UAnlmNOa8D34jJEi4fG79eEbKWqoRM2JsXZC6VoDM4TglTGgKQs0lkY1Q',
    method: 'POST',
    json: messageData,
    formData: formData,
  }, function(error, response, body) {
    if (error) {
      console.log(error);
    } else if (response.body.error) {
      console.log(response.body.error);
    }
  })
}

function sendAttachment(recipientID, fileName) {
  var fileReaderStream = fs.createReadStream(fileName)
  var formData = {
    recipient: JSON.stringify({
      id: recipientID
    }),
    message: JSON.stringify({
      attachment: {
        type: 'file',
        payload: {
          is_reusable: false
        }
      }
    }),
    filedata: fileReaderStream
  }
  callSendAPI(true, formData);
}

/*


all .get / .post put in its own 'express file'
Watson module
Messenger module : Message Handles / Send Api for facebook
Image Encoding / Decoding
Error logging and auditing

save context in another file

implement array in a database


properties file for passswords and tokens
use of variable/let/constants
*/